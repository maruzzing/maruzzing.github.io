I"±<p>í˜„ì¬ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ í†µê³„ë¥¼ êµ¬í˜„í•  ì¼ì´ ìˆì–´ pythonì„ ì‚¬ìš©í•´ ë³´ì•˜ë‹¤. ë³µì¡í•œ ìˆ˜ì‹ì€ ì•„ë‹ˆì§€ë§Œ, ê²½í—˜í•´ë³´ëŠ” ì·¨ì§€ë¡œ! ğŸ¤©</p>

<p>êµ¬ê¸€ë§ì„ í•´ë³´ë‹ˆ <a href="https://github.com/extrabacon/python-shell">python-shell</a>ì´ë¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ nodejs ì½”ë“œ ë‚´ì—ì„œ python íŒŒì¼ì„ ì‹¤í–‰í•˜ê³ , dataë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆì—ˆë‹¤.</p>

<p>ê¸°ë³¸ì ìœ¼ë¡œ. <code class="highlighter-rouge">PythonShell.run()</code> ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ íŒŒì´ì¬ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ë°, options ì¸ìë¡œ íŒŒì´ì¬ íŒŒì¼ ê²½ë¡œì™€ <code class="highlighter-rouge">args</code>ë¥¼ ì „ë‹¬í•œë‹¤. íŒŒì´ì¬ ì½”ë“œ ìª½ì—ì„œ <code class="highlighter-rouge">print()</code> í•˜ëŠ” ê°’ì´ ì½œë°±í•¨ìˆ˜ì˜ dataë¡œ ì „ë‹¬ëœë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">PythonShell</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">python-shell</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">scriptPath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">path/to/my/scripts</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">value1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">value2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">value3</span><span class="dl">"</span><span class="p">]</span>
<span class="p">};</span>
<span class="nx">PythonShell</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_script.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>ë‹¤ìŒì€ json í˜•íƒœì˜ dataë¥¼ ì£¼ê³  ë°›ëŠ” ì½”ë“œì´ë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// .js</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">scriptPath</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">../python/</span><span class="dl">"</span><span class="p">),</span>
  <span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">result</span> <span class="p">}),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">inputData</span> <span class="p">})]</span>
<span class="p">};</span>
<span class="nx">PythonShell</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="dl">"</span><span class="s2">get_avg.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>ì „ë‹¬ëœ <code class="highlighter-rouge">args</code>ëŠ” <code class="highlighter-rouge">sys.argv[1]</code> í˜•íƒœë¡œ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, json í˜•íƒœì˜ dataëŠ” <code class="highlighter-rouge">json.loads()</code>ë¡œ íŒŒì‹±í•œë‹¤.
ì—°ì‚°ì´ ëë‚œ json dataëŠ” <code class="highlighter-rouge">json.dumps(result)</code> í˜•íƒœë¡œ jsoní™” í•˜ì—¬ í”„ë¦°íŠ¸ í•˜ë©´ node.js ìª½ì— dataë¡œ ì „ë‹¬ëœë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># .py
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="s">'result'</span><span class="p">]</span>
<span class="n">inputData</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])[</span><span class="s">'inputData'</span><span class="p">]</span>

<span class="p">...</span>

<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</code></pre></div></div>
:ET