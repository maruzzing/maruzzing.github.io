---
layout: post
title: node.jsì—ì„œ python ì‚¬ìš©í•˜ê¸°(feat. python-shell)
date: 2019-09-16
comments: true
categories: [Study, nodejs]
tags: [node.js, python]
excerpt: í˜„ì¬ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ í†µê³„ë¥¼ êµ¬í˜„í•  ì¼ì´ ìˆì–´ pythonì„ ì‚¬ìš©í•´ ë³´ì•˜ë‹¤. ë³µì¡í•œ ìˆ˜ì‹ì€ ì•„ë‹ˆì§€ë§Œ, ê²½í—˜í•´ë³´ëŠ” ì·¨ì§€ë¡œ! ğŸ¤©
---

í˜„ì¬ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ í†µê³„ë¥¼ êµ¬í˜„í•  ì¼ì´ ìˆì–´ pythonì„ ì‚¬ìš©í•´ ë³´ì•˜ë‹¤. ë³µì¡í•œ ìˆ˜ì‹ì€ ì•„ë‹ˆì§€ë§Œ, ê²½í—˜í•´ë³´ëŠ” ì·¨ì§€ë¡œ! ğŸ¤©

êµ¬ê¸€ë§ì„ í•´ë³´ë‹ˆ [python-shell](https://github.com/extrabacon/python-shell)ì´ë¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ nodejs ì½”ë“œ ë‚´ì—ì„œ python íŒŒì¼ì„ ì‹¤í–‰í•˜ê³ , dataë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆì—ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ. `PythonShell.run()` ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ íŒŒì´ì¬ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ë°, options ì¸ìë¡œ íŒŒì´ì¬ íŒŒì¼ ê²½ë¡œì™€ `args`ë¥¼ ì „ë‹¬í•œë‹¤. íŒŒì´ì¬ ì½”ë“œ ìª½ì—ì„œ `print()` í•˜ëŠ” ê°’ì´ ì½œë°±í•¨ìˆ˜ì˜ dataë¡œ ì „ë‹¬ëœë‹¤.

```javascript
const { PythonShell } = require("python-shell");
let options = {
  scriptPath: "path/to/my/scripts",
  args: ["value1", "value2", "value3"]
};
PythonShell.run("my_script.py", options, function(err, data) {
  if (err) throw err;
  console.log(data);
});
```

ë‹¤ìŒì€ json í˜•íƒœì˜ dataë¥¼ ì£¼ê³  ë°›ëŠ” ì½”ë“œì´ë‹¤.

```javascript
// .js
var options = {
  scriptPath: path.join(__dirname, "../python/"),
  args: [JSON.stringify({ result }), JSON.stringify({ inputData })]
};
PythonShell.run("get_avg.py", options, function(err, data) {
  res.status(200).json({ data: JSON.parse(data), success: true });
});
```

ì „ë‹¬ëœ `args`ëŠ” `sys.argv[1]` í˜•íƒœë¡œ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, json í˜•íƒœì˜ dataëŠ” `json.loads()`ë¡œ íŒŒì‹±í•œë‹¤.
ì—°ì‚°ì´ ëë‚œ json dataëŠ” `json.dumps(result)` í˜•íƒœë¡œ jsoní™” í•˜ì—¬ í”„ë¦°íŠ¸ í•˜ë©´ node.js ìª½ì— dataë¡œ ì „ë‹¬ëœë‹¤.

```python
# .py
import json
import sys

result = json.loads(sys.argv[1])['result']
inputData = json.loads(sys.argv[2])['inputData']

...

print(json.dumps(result))
```
