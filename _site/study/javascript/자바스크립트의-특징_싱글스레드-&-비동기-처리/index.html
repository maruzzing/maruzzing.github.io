<!DOCTYPE html>
<html>
  <head>
    <title>maruzzing's devlog</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="/style.css"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="maruzzing's devlog - "
      href="/feed.xml"
    />
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"
            ><img src="/images/logo.png"
          /></a>

          <div class="site-info">
            <p class="site-name">
              <a href="/">maruzzing's devlog</a>
            </p>
          </div>
          <nav>
             
            <span class="active">
              <a href="/study">개발공부</a>
            </span>
             
            <span class="">
              <a href="/project">프로젝트</a>
            </span>
            
            <img
              src="/images/vertical_line.png"
              class="vertical_line"
            />
            <a href="mailto:lidiach217@gmail.com">
              <img
                src="/images/email_icon.png"
                class="email_icon"
            /></a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main">
      
<div>
  <div class="sidebars">
  
  <ul>
    
    <li class="sidebar">
      <a href="/study">개발공부</a>
    </li>
      
    <li class="sidebar">
      <a href="/study/computerscience">컴퓨터 공학</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/javascript" class="activated">
        Javascript
      </a>
    </li>
     
    <li class="sidebar">
      <a href="/study/nodejs">Node.js</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/graphql">GraphQL</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/nextjs">Next.js</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/react">React</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/rnative">React Native</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/py">Python</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/algorithm">Algorithm</a>
    </li>
     
    <li class="sidebar">
      <a href="/study/etc">기타</a>
    </li>
    
  </ul>
</div>

</div>
 
<div class="container">
  <article class="post">
    <button onclick="topFunction()" id="myBtn" style="display:none">
  <img
    id="btn_img"
    src="/images/back-to-top-icon-png-28.png"
  />
</button>

<script>
  //Get the button
  var mybutton = document.getElementById("myBtn");

  // When the user scrolls down 20px from the top of the document, show the button
  window.onscroll = function() {
    scrollFunction();
  };

  function scrollFunction() {
    if (
      document.body.scrollTop > 20 ||
      document.documentElement.scrollTop > 20
    ) {
      mybutton.style.display = "block";
    } else {
      mybutton.style.display = "none";
    }
    // if (
    //   document.body.scrollBottom < 20 ||
    //   document.documentElement.scrollBottom < 20
    // ) {
    //   mybutton.style.bottom = "160px";
    // }
  }

  // When the user clicks on the button, scroll to the top of the document
  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>

    <h1>자바스크립트의 특징_싱글스레드 & 비동기 처리</h1>
    <div class="date">Written on July 16, 2019</div>
    <div class="entry">
      <p>어떻게 자바스크립트는 싱글스레드 기반의 언어(single threaded language)이면서 비동기 방식으로 동작할까? 🧐</p>

<h3 id="싱글스레드">싱글스레드</h3>

<p>자바스크립트는 싱글스레드 기반의 언어(single threaded language)이다.
즉, 단 하나의 콜스택(call stack)과 단 하나의 메모리힙(memory heap)을 가지며, 동시에 하나의 작업만을 처리할 수 있기 때문에 코드를 순차적으로 실행하며, 하나의 실행이 끝나야 다음으로 넘어가게 된다. 선행 코드의 실행이 오래 걸리면, 다음 코드는 무한정 기다려야 한다는 것이다. 그렇다면 자바스크립트 코드를 어떻게 비동기적으로 처리할 수 있을까?</p>

<h3 id="비동기-처리asynchronous">비동기 처리(asynchronous)</h3>

<p>DOM, Ajax, setTimeout 과같은 브라우저가 제공하는 Web API는 브라우저 사이드에서 처리를 하게 된다. 콜스택은 Web API를 인식하여 브라우저 사이드로 보내주고, 콜스택의 모든 처리가 끝나면 event loop에 의해 다시 콜스택에 쌓여 처리되게 된다. 이렇게 자바스크립트는 선행 코드의 연산이 끝날 때까지 기다리지 않고 다음 코드를 먼저 실행할 수 있다.</p>

<ul>
  <li>자바스크립트의 event loop에 관해서는 아래의 영상이 많은 도움이 되었다.</li>
</ul>

<p><a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ"><img src="https://img.youtube.com/vi/8aGhZQkoFbQ/0.jpg" alt="What the heck is the event loop anyway?" /></a></p>

<p>간단한 예제를 살펴보면, 아래의 코드 실행 시 콘솔에는 ADCB 가 찍히게 될 것이다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">A</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">B</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">C</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">500</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">D</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p><br />
하지만 종종 선행코드의 실행이 끝나고 실행되어야 하는 코드들이 있다. 사용자 이벤트를 처리하거나, 네트워크 응답을 처리하거나, 파일을 읽고 쓰는 등의 작업을 할 때 이러한 처리가 필요하다. 예를들어, db에서 data를 가지고 와, 가지고 온 data를 활용하여 다음 처리를 할 때는 db에서 data를 가지고 올 때까지 기다렸다가 다음 코드를 처리해야 한다. 이를 가능하게 하는 방법에 <strong>콜백함수, Promise, 그리고 asycn/await</strong> 사용이 있는데, 각각의 방법에 대해 다음 포스트에서 알아보겠다.</p>

    </div>
    
 
 
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'maruzzing-github-io';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </article>
</div>
</li>
    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          <span class="footer-name">© maruzzing, 2019</span>
        </footer>
      </div>
    </div>
    
<!-- Google Analytics -->
<script>
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "//www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", "UA-142529094-1", "auto");
  ga("send", "pageview", {
    'page': '/study/javascript/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%ED%8A%B9%EC%A7%95_%EC%8B%B1%EA%B8%80%EC%8A%A4%EB%A0%88%EB%93%9C-&-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%B2%98%EB%A6%AC/',
    'title': '자바스크립트의 특징_싱글스레드 & 비동기 처리'
  });
</script>
<!-- End Google Analytics -->


  </body>
</html>
