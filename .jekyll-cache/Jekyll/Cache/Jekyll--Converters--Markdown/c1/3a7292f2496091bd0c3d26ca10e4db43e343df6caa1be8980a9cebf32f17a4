I"J	<p><a href="/study/etc/EC2(아마존-리눅스)에-서버와-DB(mysql)-배포하기-1/">이전 포스팅</a>에서 node.js 및 mysql 등 필요한 프로그램 설치가 완료되었으니, MySQL 서버 이전을 해보겠다. mysqldump를 사용하여 database를 백업하고, 백업파일을 EC2 서버에 전송하여 복원하는 방법을 사용할 예정이다.</p>

<h2 id="local-서버">local 서버</h2>

<h3 id="mysql-db-백업">MySQL DB 백업</h3>

<p>먼저, 특정 테이블만 복사하는 등 <a href="https://code-factory.tistory.com/21">다른 명령어</a>들도 있으나, 특정 database만 복사할 예정이기 때문에 아래의 명령어로 진행한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nt">--database</span> <span class="o">[</span>db_name] <span class="o">&gt;</span> <span class="o">[</span>db_name].sql
</code></pre></div></div>

<p>이렇게 하면, [db_name].sql 파일이 생성된다.</p>

<h3 id="scp를-이용하여-백업-파일-전송">scp를 이용하여 백업 파일 전송</h3>

<p>생성된 파일을 EC2 서버에 전송해야 복원이 가능하므로, 아래의 방법으로 .sql 파일을 EC2 서버에 전송한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-i</span> <span class="o">[</span>pem_file_name] <span class="o">[</span>upload_file] ec2-user@ec[ip_of_ec2]:~/[transfer_path]
</code></pre></div></div>

<h2 id="원격-ec2-서버">원격 EC2 서버</h2>

<h3 id="mysql-db-복원">MySQL DB 복원</h3>

<p>먼저, 복원대상 db를 생성한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
mysql&gt; create database <span class="o">[</span>db_name]
mysql&gt; <span class="nb">exit</span>
</code></pre></div></div>

<p>다음은 전송받은 .sql 파일을 이용하여 대상 db에 복원한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span> <span class="o">[</span>db_name] &lt; <span class="o">[</span>db_name].sql
</code></pre></div></div>
:ET